name: Benchmark

on:
  schedule:
    - cron: '0 12 * * *' # 在北京时间每天的12点触发
  workflow_dispatch:
    inputs:
      ckb_remote_url:
        description: 'ckb_remote_url'
        required: false
        default: 'http://github-test-logs.ckbapp.dev/ckb/bin/ckb-develop-x86_64-unknown-linux-gnu-portable.tar.gz'

jobs:

  benchmark:
    name: Benchmark
    runs-on: ubuntu-20.04
    env:
      SSH_ID: ${{ secrets.SSH_ID }}
      SSH_ID_PUB: ${{ secrets.SSH_ID_PUB }}
      GITHUB_TOKEN: ${{ secrets.REPO_ACCESS_TOKEN }}
      ACCESS_KEY: ${{ secrets.ACCESS_KEY }}
      SECRET_KEY: ${{ secrets.SECRET_KEY }}
      CKB_REMOTE_URL: ${{ github.event.inputs.ckb_remote_url }}
    steps:
      - uses: actions/checkout@v3
        with:
          ref: ckb-bench-with-data
      - name: Start
        run: |
          echo "debug"
          
      - name: Setup upterm session
        uses: lhotari/action-upterm@v1
        
